## 블록 시작하기
        
### 블록 입문서 
- 블록은 C언어에 새로 추가된 확장 기능이다.
- 블록은 간단하게 말해서 "자동(지역) 변수와 함께 동작하는 익명 함수"라고 할 수 있다.
	- 자동변수 : 프로그램 흐름이 변수의 영역에 들어가고 나올 때 자동으로 할당, 해제되는 지역 변수

#### 익명함수(Anonymous functions)
- 이름이 없는 함수이다.
- C와 Objective-C에서 블록을 사용하지 않고는 익명 함수를 만들 수 없다.
- C++에서는 블록과 같은 개념으로 람다 함수가 있다.
- 보통 함수를 사용하기 위해서는 함수의 이름이 필요하지만, 블록을 사용하면 익명함수가 사용되어 함수의 이름을 사용할 필요가 없다.

#### 변수
- C언어에서 사용하는 변수
	- 자동 변수(지역변수)
	- 함수 인자값
	- 정적 변수(정적 지역 변수)
	- 정적 전역 변수
	- 전역 변수
- 정적 지역 변수, 정적 전역 변수, 전역 변수는 함수 호출이 끝난 이후에도 값이 유지되고 애플리케이션의 한 메모리 영역에 저장된다. 즉, 애플리케이션의 어디서나 해당 변수의 값이 유지된다.

#### 블록으로 해결
- 블록은 훨씬 적은 양의 코드로 Objective-C의 클래스와 변수를 유지하는 기능을 제공한다.
- 블록은 자동 변수의 값을 유지한다.
- 블록에서 익명 함수는 "블록 리터럴"또는 "블록"이라고 부른다.
- 익명함수는 자동 변수와 함께 사용할 수 있다. 즉, 블록이 정적(또는 전역) 변수들을 사용할 때의 문제점을 해결해주고, 적은 분량의 코드로 Objective-C 클래스와 동일하게 만들 수 있다. 

### 블록 리터럴 문법
- 블록 리터럴은 함수의 이름이 존재하지 않는다. 즉, 익명 함수이다.
- 블록 리터럴에서는 함수의 리턴타입 전에 ^(캐럿)을 사용한다.
- `^` `리턴 타입` `(인자 목록)` `(표현)` or `^` `(인자 목록)` `(표현)` or `^` `(표현)`
	- 리턴타입을 생략하면 return 구문의 변수 타입이 대신 사용된다.
	- 블록 리터럴에 리턴 문이 없을 때에는 void를 기본 타입으로 사용한다.
	- 블록이 여러 리턴 문을 가질 경우는 모든 변수 타입은 같아야 한다.
	- 함수에 인자가 없다면 인자 목록은 생략될 수 있다.

### 블록 타입 변수 
- 블록 리터럴은 함수 이름이 없고 `^` 심볼이 있다는 점을 제외하고는 함수와 동일하다.
- C함수에서 함수의 주소는 함수 포인터 타입의 변수로 참조 할 수 있다.
- 이와 마찬가지로, 블록 리터럴은 블록 타입 변수로 할당할 수 있으며, 이 변수는 소스코드 안에 블록 리터럴이 그 값으로 생성된다.
- `int (^blk)(int) = ^(int count){return count + 1};`	
	- 블록 리터럴에서 변수로 블록을 할당하는 방법
	- `^`로 시작하는 블록 리터럴로 블록을 생성한다.
	- 그리고 블록은 `blk`변수에 할당한다. 
- 블록은 또 다른 블록 타입의 변수에도 값을 할당할 수 있다.            
- 함수들은 블록 타입의 인자값을 사용할 수 있다.
- 함수들은 블록을 반환할 수 있다.
- `typedef int (^blk_t)(int);`
	- 함수의 인자 또는 리턴 타입에 블록을 사용하는 경우에는 소스코드의 블록 타입이 복잡해진다.
	- 이럴 경우 함수 포인터에 대해 typedef를 사용하여 복잡성을 피할 수 있다.
	- 위와 같이 typedef로 선언하면 blk_t타입으로 변수를 선언할 수 있다.
	- `void func(int (^blk)(int))` -> `void func(blk_t blk)`
	- `int (^func()(int))` -> `blk_t func()` 		 
- 변수에 할당한 함수를 호출하는 것과 동일한 방법으로 블록 함수를 실행할 수 있다.

### 자동 변수 캡처
- 자동 변수와 함께 동작한다는 것은, 자동변수의 값을 캡쳐한다는 것과 같은 의미이다.
- 블록 리터럴 안에서 사용하는 자동 변수는 미리 캡쳐되어 블록 리터럴이 실행될 때 저장된다.
- 이 값은 이미 캡쳐가 되어 있어서 블록 리터럴이 실행된 이후에 수정하더라도 블록 리터럴 내부의 값은 절대 영향을 받지 않는다.

#### __block 지시어
- 자동변수를 캡처하지 않고 수정할 수 있도록 선언할 때 사용하는 지시어이다.
- 즉, 자동변수를 블록 밖에 선언한 경우, 블록 안에서 변수에 값을 할당하기 위해서는 __block 지시어를 사용한다. 
